<div id="app">
    <ul>
        <li v-for="item in fItems" v-on:click="date = item">{{item}}@*<a :href="controller + item">{{item}}</a>*@</li>
    </ul>
    <div>
        <object-list :date="date"></object-list>
    </div>
</div>

@section Scripts
    {
    <script type="module">
        import ObjectList from '/vue-components/ObjectList.js'

        const { Tooltip, Popover, Carousel } = bootstrap

        export const tooltip = {
            mounted(el) {
                const tooltip = new Tooltip(el)
            }
        }

        export const popover = {
            mounted(el) {
                const popover = new Popover(el)
            }
        }

        export const carousel = {
            mounted(el) {
                const carousel = new Carousel(`#${el.id}`, {
                    //interval: 2000, //輪播時間(毫秒)
                    touch: false
                })
            }
        }

        const apiUrl = "https://localhost:7224/CZZ/GetPath";

        import { createApp, ref, computed, onMounted } from 'https://unpkg.com/vue@3/dist/vue.esm-browser.js'

        createApp({
            components: {
                'object-list': ObjectList
            },
            setup() {
                const items = ref([]);
                const error = ref('');
                const date = ref('');

                onMounted(async () => {
                    await fetchData();
                })

                async function fetchData() {
                    axios.get(apiUrl)
                        .then((response) => {
                            items.value = response.data;
                        })
                        .catch((error) => {
                            error.value = error;
                        });
                }

                const fItems = computed(() => {
                    const datas = [...items.value.filter(t => {
                        return t !== 'database';
                    })]
                    return datas
                });

                return {
                    fItems,
                    error,
                    date
                }
            }
        }).mount('#app');
    </script>
}